%% File: test_trial.m
% Construct with modules (floating assumption)
clc; clear variables; close all;
addpath('lib');
addpath('lib/display'); addpath('lib/log');
addpath('lib/alg'); addpath('lib/alg/connect');

%% Initialization
str1='shape1half-robot18-target18-method3-time';
N_run = 30;
for i = 1:N_run
    str2=num2str(i);
    name=[str1 str2]
    trial = Trial(name);
    
    % Map
    Map_Size = [30,30]; % length*widthhalf
    
    % Robots
    robot_locs = [2,2;8,2;14,2;20,2;28,2;...
                  2,8;2,14;2,20;2,28;...
                  22,28;16,28;10,28;13,28;...
                  28,28;28,22;28,16;28,13;28,10];
    dock = [0,1,0,1;0,1,1,1;...
            0,1,0,1;1,1,0,1;1,1,1,0;0,1,1,0;...
            0,0,0,1;1,1,0,1;1,1,1,0;1,1,0,1;1,1,1,0;0,0,1,0;...
            1,0,0,1;1,1,0,1;1,1,1,0;1,0,1,0;...
            1,0,0,1;1,0,1,1;...
            ]; % up, down, left, right
    dock = [0,2,0,1;...
            0,2,2,0;...
            0,2,0,1;...
            1,2,2,0;...
            1,2,0,1;...
            0,2,2,0;...
            0,0,0,1;...
            1,2,2,0;...
            1,2,0,1;...
            1,2,2,0;...
            1,2,0,1;...
            0,0,2,0;...
            1,0,0,1;...
            1,2,2,0;...
            1,2,0,1;...
            1,0,2,0;...
            1,0,0,1;...
            1,0,2,0;...
            ]; % up, down, left, right
    % Targets
     tar_locs = [ 15,17;16,17;...
            14,16;15,16;16,16;17,16;...
      13,15;14,15;15,15;16,15;17,15;18,15;...
            14,14;15,14;16,14;17,14;...
                  15,13;16,13;];
    try
        trial.run("RobotLocation", robot_locs, ...
            "RobotDock", dock, ...
            "TargetLocation", tar_locs,...
            "MapSize", Map_Size, ...
            "AlgorithmType", 3, ...
            "isLogging", [true, true], ...
            "TargetCenter", 15 ...
        );
    catch e
        disp(e);
    end
end